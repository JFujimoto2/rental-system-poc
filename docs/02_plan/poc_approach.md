# レガシーシステム リプレースPoC 進め方

## 目的

Oracle + 独自Spring → Rails 8.1 + PostgreSQL への移行可能性を検証する

-----

## PoC対象画面の選定基準

|#|種別          |選定理由             |候補画面|
|-|------------|-----------------|----|
|1|CRUD基本画面    |基本的なデータ操作が再現できるか |    |
|2|複雑な検索画面     |複雑なクエリがRailsで書けるか|    |
|3|Excel出力画面   |帳票機能の実現性         |    |
|4|**最も複雑な機能** |難所が突破できるかの試金石    |    |
|5|**コアロジック機能**|業務の中心となる処理の再現性   |    |

※ 3〜5画面程度を選定

-----

## Phase 1：準備（1〜2週間）

### 1-1. 対象画面の決定

|タスク       |内容                |完了 |
|----------|------------------|---|
|画面候補リストアップ|上記基準で候補を挙げる       |[ ]|
|関係者ヒアリング  |「一番複雑」「コア機能」はどれか確認|[ ]|
|最終決定      |3〜5画面に絞る          |[ ]|

### 1-2. データ準備

|タスク      |内容               |完了 |
|---------|-----------------|---|
|対象テーブル特定 |選定画面で使うテーブルを洗い出す |[ ]|
|サンプルデータ抽出|検証用に必要なデータをエクスポート|[ ]|
|データマスキング |本番データを使う場合は匿名化   |[ ]|

### 1-3. 環境構築

|タスク              |内容                         |完了 |
|-----------------|---------------------------|---|
|Rails 8.1 セットアップ |新規プロジェクト作成                 |[ ]|
|PostgreSQL セットアップ|DB環境構築                     |[ ]|
|管理画面検討           |ActiveAdmin or Administrate|[ ]|

-----

## Phase 2：実装（3〜5週間）

### 2-1. DB層（Week 1）

|タスク       |内容                       |完了 |
|----------|-------------------------|---|
|テーブル設計    |Oracle→PostgreSQLへのスキーマ変換|[ ]|
|マイグレーション作成|Railsマイグレーションファイル        |[ ]|
|モデル作成     |ActiveRecordモデル + リレーション |[ ]|
|データ投入     |サンプルデータのインポート            |[ ]|

### 2-2. 基本機能（Week 2）

|タスク    |内容            |完了 |
|-------|--------------|---|
|CRUD画面 |一覧/詳細/登録/編集/削除|[ ]|
|検索機能   |複雑な検索条件の実装    |[ ]|
|バリデーション|入力チェックロジック    |[ ]|

### 2-3. 複雑な機能（Week 3-4）

|タスク         |内容         |完了 |
|------------|-----------|---|
|**最も複雑な機能** |難所の実装・検証   |[ ]|
|**コアロジック機能**|業務中心処理の再現  |[ ]|
|独自フレームワーク解析 |定義ファイルの読み解き|[ ]|

### 2-4. 帳票・連携（Week 4-5）

|タスク    |内容             |完了 |
|-------|---------------|---|
|Excel出力|帳票の再現          |[ ]|
|ファイル連携 |（対象があれば）連携処理の実装|[ ]|

-----

## Phase 3：評価（1週間）

### 評価項目

|項目    |評価観点                  |結果|備考|
|------|----------------------|--|--|
|機能再現性 |既存と同じ動作ができるか          |  |  |
|コアロジック|業務の中心処理が正しく動くか        |  |  |
|複雑機能  |最難関の機能が突破できたか         |  |  |
|開発効率  |1画面あたりの開発工数           |  |  |
|性能    |検索・表示速度               |  |  |
|データ移行 |Oracle→PostgreSQL変換の課題|  |  |
|保守性   |コードの可読性・テスト容易性        |  |  |

### 判定基準

|結果     |判定      |次のアクション         |
|-------|--------|----------------|
|全項目クリア |✅ Go    |本開発へ移行          |
|軽微な課題あり|△ 条件付きGo|課題対策を計画に組み込み本開発へ|
|重大な課題あり|❌ No Go |課題解決策を再検討 or 別方針|

-----

## 成果物

|ドキュメント   |内容         |
|---------|-----------|
|PoC結果レポート|各評価項目の結果と考察|
|全体移行見積もり |残り画面の工数概算  |
|リスク一覧    |本開発で注意すべき点 |
|技術検証コード  |GitHubリポジトリ|

-----

## スケジュール目安

```
Week 1-2  : Phase 1（準備）
Week 3-7  : Phase 2（実装）
Week 8    : Phase 3（評価）
---------------------------------
合計      : 約2ヶ月
```

-----

## 最初の一歩

1. [ ] 「一番複雑な機能」を特定する
1. [ ] 「コアロジック機能」を特定する
1. [ ] 対象テーブルを洗い出す
1. [ ] Rails環境を立ち上げる
1. [ ] 作り始める

-----

*作成日: 2025年1月*